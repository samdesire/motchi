{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "WebSocketMessage",
  "description": "Schema for messages sent via WebSocket",
  "oneOf": [
    {
      "title": "PetMoneyUpdate",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["value_change_request", "PetMoneyUpdate"],
          "description": "Optional type marker for a value change request."
        },
        "pet_id": {
          "type": "integer",
          "description": "The ID of the pet whose value is being updated."
        },
        "amount": {
          "type": "integer",
          "description": "The amount by which the attribute is being updated."
        }
      },
  "required": ["amount"],
      "additionalProperties": false
    },
    {
      "title": "ResultResponse",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["result_response", "ResultResponse"],
          "description": "Indicates the result of a value change request."
        },
        "status": {
          "type": "string",
          "enum": ["success", "fail"],
          "description": "The status of the request."
        },
        "pet_id": {
          "type": "integer",
          "description": "The ID of the pet whose value was being updated."
        },
        "amount": {
          "type": "integer",
          "description": "The amount that was requested to be updated."
        },
        "newMoney": {
          "type": "integer",
          "description": "The new money value after a successful update (matching server response key)."
        },
        "message": {
          "type": "string",
          "description": "Optional human-readable message on failure."
        }
      },
  "required": ["type", "status"],
      "additionalProperties": false
    },
    {
      "title": "PingPongMessage",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["ping", "pong"],
          "description": "Ping or Pong message for connection health checks."
        }
      },
      "required": ["type"],
      "additionalProperties": false
    }
    ,
    {
      "title": "GetData",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["get_data", "GetData"],
          "description": "Request the server to return the caller's associated pet data."
        }
      },
      "required": ["type"],
      "additionalProperties": false
    },
    {
      "title": "PetDataResponse",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["pet_data_response", "PetDataResponse"],
          "description": "Server response carrying the pet's data."
        },
        "status": {
          "type": "string",
          "enum": ["success", "fail"]
        },
        "pet": {
          "type": "object",
          "properties": {
            "id": { "type": "integer" },
            "name": { "type": "string" },
            "money": { "type": "integer" },
            "health": { "type": "integer" },
            "hunger": { "type": "integer" },
            "happiness": { "type": "integer" },
            "main_owner": { "type": "integer" },
            "owner2": { "type": ["integer", "null"] }
          },
          "required": ["id", "name", "money", "health", "hunger", "happiness", "main_owner"]
        },
        "message": { "type": "string" }
      },
      "required": ["type", "status"],
      "additionalProperties": false
    }
  ]
}